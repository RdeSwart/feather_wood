{% extends "base.html" %} 
{% load static %} 

{% block page_header %}
<header class="masthead">
    <!-- Code from Codepen.io -->
    <div id="carousel" class="carousel slide hero-slides" data-ride="carousel">
        <ol class="carousel-indicators">
          <li class="active" data-target="#carousel" data-slide-to="0"></li>
          <li data-target="#carousel" data-slide-to="1"></li>
          <li data-target="#carousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
          <div class="carousel-item active craft">
            <div class="container h-100 d-none d-md-block">
              <div class="row align-items-center h-100">
                <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                  <div class="caption animated fadeIn">
                    <h2 class="animated fadeInLeft">Art & Craft Specialist</h2>
                    <p class="animated fadeInRight">Stocking only the most natural ingredients for safe use whilst crafting</p>
                    <a class="animated fadeInUp btn delicious-btn" href="{% url 'products' %}?category=crayons,craft-kit,paint">Learn more</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item winner">
            <div class="container h-100 d-none d-md-block">
              <div class="row align-items-center h-100">
                <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                  <div class="caption animated fadeIn">
                    <h2 class="animated fadeInLeft">Retail Winners 2024</h2>
                    <p class="animated fadeInRight">We are so honoured to have recieved the Retail Award again for 2024. We thrive to offer you the best in children's toys.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item gentle">
            <div class="container h-100 d-none d-md-block">
              <div class="row align-items-center h-100">
                <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                  <div class="caption animated fadeIn">
                    <h2 class="animated fadeInLeft">We believe in Gentle Play</h2>
                    <p class="animated fadeInRight">Here at Feather & Wood, we believe gentle adults came from gentle children. Help teach your child empathy and gentleness through play.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
</header>
    {% endblock %} 
    
    
{% block content %}
<div class="container col-10 offset-1">
    <div class="row">
        <h4 class="col text-center mt-3">Childhood Simplified with <strong>Feather and Wood</strong></h4>
        <hr>
        <h3 class="col text-center mt-3">Products on Sale Now</h3>
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">  
            {% for product in products %}
                <div class="col mb-5">
                    <div class="card h-100">
                        <!-- Sale badge -->
                        {% if product.discount %}
                            <div class="badge bg-dark text-white position-absolute" style="top: 0.5rem; right: 0.5rem">Sale</div>
                        {% endif %}
                        <!-- Product image -->
                        {% if product.image %}
                            <a href="{% url 'product_detail' product.id %}">
                                <img class="card-img-top img-fluid" src="{{ product.image.url }}" alt="{{ product.name }}">
                            </a>
                        {% else %}
                            <a href="{% url 'product_detail' product.id %}">
                                <img class="card-img-top" src="{{ MEDIA_URL }}noimage.png" alt="{{ product.name }}">
                            </a>
                        {% endif %}
                        <!-- Product details -->
                        <div class="card-body p-4">
                            <div class="text-center">
                                <!-- Product name -->
                                <h5 class="fw-bolder card-text">{{ product.name }}</h5>
                                {% if product.category %}
                                    <p class="small mt-1 mb-0">
                                        <a class="text-muted" href="{% url 'products' %}?category={{ product.category.name }}">
                                            <i class="fas fa-tag mr-1"></i>{{ product.category.friendly_name }}
                                        </a>
                                    </p>
                                {% endif %}
                                {% if product.rating %}
                                    {{ product.get_star_rating|safe }}
                                    <small class="text-muted"><i class="fas fa-star mr-1"></i> {{ product.rating }} </small><hr>
                                {% else %}
                                    <small class="text-muted">No rating yet</small><hr>
                                {% endif %}
                                <!-- Product price -->
                                {% if product.discount %}
                                    <span class="text-muted text-decoration-line-through">Was: €{{ product.rrp_price }}</span><br>
                                    Now: €{{ product.sale_price }}
                                {% else %}
                                    €{{ product.rrp_price }}
                                {% endif %}
                            </div>
                        </div>
                        <!-- Product actions -->
                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                            <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="{% url 'product_detail' product.id %}">View Product</a></div>
                        </div>
                    </div>
                </div>
                {% if forloop.counter|divisibleby:4 %}
                    </div> <!-- End of row for 4 products -->
                    <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                {% endif %}
            {% endfor %}
        </div>
        <hr> <!-- Optional HR after all products -->
    </div>
</div>

{% endblock %}
